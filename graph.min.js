function Node(e,t){var n=this;n.index=t,n.graph=e,n.children={}}Node.prototype.connect=function(e,t){var n=this;return n.children[e]=t,n},Node.prototype.get=function(e){var t=this;return t.children[e]};
function Graph(e,t){var n=this;n.aliases={},n.nodes=[],n.size=0;for(var r=0;r<e;r++)n.nodes[r]=new Node(n,r),n.alias("NODES",r.toString(),n.nodes[r]),n.size++;return undefined!==t&&n.map(t),n}Graph.prototype.map=function(e){var t=this;for(var n in t.nodes)e(t,t.nodes[n]);return t},Graph.prototype.connect=function(e,t){var n=this,r=Math.sqrt(n.size);for(var i in t){var s=t[i].x+Math.floor(e.index%r),o=t[i].y+Math.floor(e.index/r),u=s+o*r;s>=0&&o>=0&&s<r&&o<r&&e.connect(i,n.get(u))}return n},Graph.prototype.alias=function(e,t,n){var r=this;return undefined!==n&&(undefined===r.aliases[e]&&(r.aliases[e]={}),r.aliases[e][t]=n),r.aliases[e][t]},Graph.prototype.get=function(e){var t=this;return t.nodes[e]};
Graph.CONNECTORS={FOUR_DIRECTIONAL_GRID:function(e,t){e.connect(t,{UP:{y:-1,x:0},DOWN:{y:1,x:0},LEFT:{y:0,x:-1},RIGHT:{y:0,x:1}})},EIGHT_DIRECTIONAL_GRID:function(e,t){var n=Math.floor(t.index%Math.sqrt(e.size)),r=Math.floor(t.index/Math.sqrt(e.size)),i=n.toString()+", "+r.toString();e.connect(e.alias("TABLE",i,t),{NORTH:{y:-1,x:0},"NORTH-EAST":{y:-1,x:1},EAST:{y:0,x:1},"SOUTH-EAST":{y:1,x:1},SOUTH:{y:1,x:0},"SOUTH-WEST":{y:1,x:-1},WEST:{y:0,x:-1},"NORTH-WEST":{y:-1,x:-1}})},HEXAGONAL_GRID:function(e,t){return Math.floor(t.index/Math.sqrt(e.size))%2==0?e.connect(t,{"HEX-EAST":{x:1,y:0},"HEX-SOUTH-EAST":{x:0,y:1},"HEX-SOUTH-WEST":{x:-1,y:1},"HEX-WEST":{x:-1,y:0},"HEX-NORTH-WEST":{x:-1,y:-1},"HEX-NORTH-EAST":{x:0,y:-1}}):e.connect(t,{"HEX-EAST":{x:1,y:0},"HEX-SOUTH-EAST":{x:1,y:1},"HEX-SOUTH-WEST":{x:0,y:1},"HEX-WEST":{x:-1,y:0},"HEX-NORTH-WEST":{x:0,y:-1},"HEX-NORTH-EAST":{x:1,y:-1}}),e}}
